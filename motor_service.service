[Unit]
Description=DriftApp Motor Service - Dome Control
Documentation=https://github.com/jpokinter87/DriftApp-Web
After=network.target ems22d.service
Requires=ems22d.service

[Service]
Type=notify
WorkingDirectory=/home/slenk/DriftApp
ExecStart=/home/slenk/DriftApp/.venv/bin/python /home/slenk/DriftApp/services/motor_service.py

# Watchdog: redémarre si pas de heartbeat pendant 30s
# Le service envoie WATCHDOG=1 toutes les 10s
WatchdogSec=30

# Politique de redémarrage
Restart=on-failure
RestartSec=5

# Utilisateur root requis pour GPIO
User=root

# Variables d'environnement
Environment=PYTHONUNBUFFERED=1

# Timeout de démarrage (READY=1 doit arriver avant)
TimeoutStartSec=30

# Limites de ressources
Nice=-5

[Install]
WantedBy=multi-user.target