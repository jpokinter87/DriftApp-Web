@import "tailwindcss";
@source "../../templates";
@source "../js";

/* ══════════════════════════════════════════════════════
   DriftApp Observatory Theme — Tailwind v4
   Dark warm palette inspired by observatory control rooms
   ══════════════════════════════════════════════════════ */

@theme {
  /* ── Background surfaces ── */
  --color-obs-dark: #1a1612;
  --color-obs-panel: #241e18;
  --color-obs-input: #2d261e;
  --color-obs-surface: #342c22;
  --color-obs-hover: #3d3428;

  /* ── Border ── */
  --color-obs-border: #4a3d2e;
  --color-obs-border-light: #5a4d3e;

  /* ── Text ── */
  --color-obs-text: #e8e4df;
  --color-obs-text-secondary: #a09080;
  --color-obs-text-muted: #706050;

  /* ── Accent colors ── */
  --color-accent-amber: #d4a055;
  --color-accent-amber-light: #e8b870;
  --color-accent-amber-dark: #b08040;
  --color-accent-green: #00d26a;
  --color-accent-green-dim: #00a855;
  --color-accent-orange: #ffa502;
  --color-accent-red: #ff4757;
  --color-accent-red-dim: #cc3a47;
  --color-accent-purple: #a855f7;

  /* ── Functional status ── */
  --color-status-ok: #00d26a;
  --color-status-warn: #ffa502;
  --color-status-error: #ff4757;
  --color-status-info: #3b82f6;

  /* ── Typography ── */
  --font-display: "JetBrains Mono", "SF Mono", "Fira Code", ui-monospace, monospace;
  --font-body: "IBM Plex Sans", "SF Pro Text", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", "SF Mono", ui-monospace, monospace;

  /* ── Spacing tokens ── */
  --spacing-panel: 1rem;
  --spacing-section: 1.5rem;

  /* ── Border radius ── */
  --radius-panel: 0.625rem;
  --radius-button: 0.5rem;
  --radius-badge: 0.375rem;

  /* ── Shadows ── */
  --shadow-panel: 0 2px 8px rgba(0, 0, 0, 0.3), 0 1px 3px rgba(0, 0, 0, 0.2);
  --shadow-glow-amber: 0 0 12px rgba(212, 160, 85, 0.25);
  --shadow-glow-green: 0 0 12px rgba(0, 210, 106, 0.25);
  --shadow-glow-red: 0 0 12px rgba(255, 71, 87, 0.3);

  /* ── Animations ── */
  --animate-fade-in: fade-in 0.3s ease-out;
  --animate-slide-up: slide-up 0.3s ease-out;
  --animate-pulse-glow: pulse-glow 2s ease-in-out infinite;
}

/* ── Keyframes ── */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 4px rgba(212, 160, 85, 0.2); }
  50% { box-shadow: 0 0 16px rgba(212, 160, 85, 0.4); }
}

/* ── Base layer ── */
@layer base {
  html {
    font-family: var(--font-body);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: var(--color-obs-dark);
    color: var(--color-obs-text);
    min-height: 100vh;
  }

  /* Focus ring for keyboard navigation */
  :focus-visible {
    outline: 2px solid var(--color-accent-amber);
    outline-offset: 2px;
  }

  /* Scrollbar styling for dark theme */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: var(--color-obs-dark);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-obs-border);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-obs-border-light);
  }
}

/* ── Component layer ── */
@layer components {
  /* ── Panel card ── */
  .panel {
    @apply bg-obs-panel border border-obs-border rounded-panel shadow-panel p-panel;
  }

  /* ── Status dot ── */
  .status-dot {
    @apply inline-block w-2 h-2 rounded-full;
  }

  .status-dot-ok {
    @apply bg-status-ok shadow-glow-green;
  }

  .status-dot-warn {
    @apply bg-status-warn;
  }

  .status-dot-error {
    @apply bg-status-error shadow-glow-red;
  }

  /* ── Buttons ── */
  .btn {
    @apply px-4 py-2 border-none rounded-button cursor-pointer text-sm font-medium
           font-mono transition-all duration-200 inline-flex items-center justify-center gap-1.5;
  }

  .btn:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-accent-amber text-obs-dark font-semibold;
  }

  .btn-primary:hover:not(:disabled) {
    @apply bg-accent-amber-light;
  }

  .btn-secondary {
    @apply bg-obs-input text-obs-text border border-obs-border;
  }

  .btn-secondary:hover:not(:disabled) {
    @apply bg-obs-hover;
  }

  .btn-danger {
    @apply bg-accent-red text-white font-semibold;
  }

  .btn-danger:hover:not(:disabled) {
    @apply bg-accent-red-dim;
  }

  .btn-jog {
    @apply flex-1 py-3 bg-obs-input text-obs-text border border-obs-border
           rounded-button font-mono text-sm;
  }

  .btn-jog:hover {
    @apply bg-obs-hover;
  }

  .btn-stop {
    @apply flex-1 py-3 bg-accent-red/20 text-accent-red font-bold
           rounded-button font-mono text-sm;
  }

  .btn-stop:hover {
    @apply bg-accent-red/30;
  }

  .btn-continuous {
    @apply bg-obs-input text-obs-text-secondary border border-obs-border
           rounded-button font-mono text-sm px-4 py-2;
  }

  .btn-continuous:hover {
    @apply bg-accent-amber/15 text-accent-amber;
  }

  .btn-continuous.active {
    @apply bg-accent-amber/20 text-accent-amber border-accent-amber/30;
  }

  .button-group {
    @apply flex gap-2;
  }

  .button-group .btn {
    @apply flex-1;
  }

  /* ── Form inputs ── */
  .input-field {
    @apply w-full px-3 py-2 bg-obs-input border border-obs-border rounded-button
           text-obs-text text-sm font-mono outline-none
           transition-colors duration-200;
  }

  .input-field:focus {
    @apply border-accent-amber;
  }

  .input-field::placeholder {
    @apply text-obs-text-muted;
  }

  .input-group {
    @apply flex gap-2 items-center;
  }

  .search-input {
    @apply w-full px-3 py-2 bg-obs-input border border-obs-border rounded-button
           text-obs-text text-sm font-mono outline-none transition-colors duration-200 pl-8;
  }

  .search-input:focus {
    @apply border-accent-amber;
  }

  .search-input::placeholder {
    @apply text-obs-text-muted;
  }

  /* ── Badges ── */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-badge text-xs font-mono font-medium;
  }

  .badge-mode-normal {
    @apply bg-accent-green/15 text-accent-green;
  }

  .badge-mode-critical {
    @apply bg-accent-orange/15 text-accent-orange;
  }

  .badge-mode-continuous {
    @apply bg-accent-red/15 text-accent-red;
  }

  .badge-info {
    @apply bg-status-info/15 text-status-info;
  }

  .badge-amber {
    @apply bg-accent-amber/15 text-accent-amber;
  }

  /* ── Log entries ── */
  .log-container {
    @apply max-h-40 overflow-y-auto bg-obs-dark rounded-button p-2 font-mono text-xs;
  }

  .log-entry {
    @apply py-1 border-b border-obs-border/50 text-obs-text-secondary;
  }

  .log-entry:last-child {
    @apply border-b-0;
  }

  .log-entry-error {
    @apply text-accent-red;
  }

  .log-entry-success {
    @apply text-accent-green;
  }

  .log-entry-warning {
    @apply text-accent-orange;
  }

  .log-entry-correction {
    @apply text-accent-amber;
  }

  .log-entry-tracking {
    @apply text-accent-green;
  }

  /* ── Section headers ── */
  .section-title {
    @apply font-display font-semibold text-accent-amber text-sm uppercase tracking-wide;
  }

  .section-divider {
    @apply border-t border-obs-border my-4;
  }

  /* ── Info grid ── */
  .info-grid {
    @apply grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs font-mono;
  }

  .info-item {
    @apply flex flex-col p-2 bg-obs-input rounded-button;
  }

  .info-label {
    @apply text-obs-text-muted text-[0.65rem] uppercase tracking-wide;
  }

  .info-value {
    @apply text-obs-text font-bold;
  }

  /* ── Stat card ── */
  .stat-card {
    @apply bg-obs-panel border border-obs-border rounded-panel shadow-panel p-panel
           flex flex-col items-center gap-1 text-center;
  }

  .stat-value {
    @apply text-2xl font-display font-bold text-accent-amber;
  }

  .stat-label {
    @apply text-xs text-obs-text-muted uppercase tracking-wide;
  }

  /* ── Mode colors (tracking) ── */
  .mode-normal {
    @apply text-accent-green;
  }

  .mode-critical {
    @apply text-accent-orange;
  }

  .mode-continuous {
    @apply text-accent-red;
  }

  /* ── Tab switcher ── */
  .tab-group {
    @apply flex gap-1 bg-obs-dark rounded-button p-1;
  }

  .tab-item {
    @apply px-3 py-1.5 rounded-badge text-xs font-mono text-obs-text-secondary
           cursor-pointer transition-colors duration-200;
  }

  .tab-item:hover {
    @apply text-obs-text;
  }

  .tab-item.active {
    @apply bg-obs-panel text-accent-amber;
  }

  /* ── Panel Astro — constellation background ── */
  .panel-astro {
    background-image: url('/static/img/constellations-pattern.svg');
    background-size: 400px 400px;
    background-repeat: repeat;
    position: relative;
    transition: box-shadow 0.3s ease;
  }

  .panel-astro:hover {
    box-shadow: 0 0 15px rgba(212, 160, 85, 0.15),
                0 0 30px rgba(212, 160, 85, 0.05);
  }

  /* ── Section title fire gradient ── */
  .section-title-fire {
    font-size: 1rem !important;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 700;
    color: transparent !important;
    background: linear-gradient(90deg, #ff6b00 0%, #ff8c00 30%, #ffa500 50%, #d4a055 80%, #c09050 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
  }
}

/* ── Shared pulse keyframe ── */
@keyframes shared-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-pulse-status {
  animation: shared-pulse 2s ease-in-out infinite;
}

/* ── Accessibility: reduced motion ── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
