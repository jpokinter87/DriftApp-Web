/**
 * Session Report - Styles CSS
 *
 * Thème sombre cohérent avec dashboard.css et system.css
 *
 * Version: 4.5
 * Date: Décembre 2025
 */

/* =============================================================================
   VARIABLES CSS
   ============================================================================= */

:root {
    /* Palette marron/ambre observatoire */
    --bg-dark: #1a1612;
    --bg-card: #241e18;
    --bg-input: #2d261e;
    --text-primary: #e8e4df;
    --text-secondary: #a09080;
    --text-muted: #706050;
    --border-color: #4a3d2e;

    /* Couleur d'accent principale: ambre */
    --accent-amber: #d4a055;
    --accent-amber-light: #e8c080;
    --accent-amber-dark: #b08040;
    --accent-blue: var(--accent-amber);  /* Alias pour compatibilité */

    /* Couleurs d'état (conservées) */
    --accent-green: #00d26a;
    --accent-orange: #ffa502;
    --accent-red: #ff4757;
    --accent-purple: #a855f7;

    /* Couleurs des modes */
    --mode-normal: #00d26a;
    --mode-critical: #ffa502;
    --mode-continuous: #ff4757;

    /* Dégradé feu/ambre pour titres */
    --gradient-fire: linear-gradient(90deg, #ff6b00 0%, #ff8c00 30%, #ffa500 50%, #d4a055 80%, #c09050 100%);

    /* Pattern astronomique SVG dense pour fond des sections */
    --astro-pattern: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180' viewBox='0 0 180 180'%3E%3Cg fill='none' stroke='%233a3028' stroke-width='1.2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M15 12 L15 6 M15 18 L15 24 M9 15 L3 15 M21 15 L27 15'/%3E%3Ccircle cx='15' cy='15' r='2'/%3E%3Ccircle cx='55' cy='18' r='6'/%3E%3Cellipse cx='55' cy='18' rx='12' ry='4' transform='rotate(-15 55 18)'/%3E%3Cpath d='M95 15 Q102 8 106 15 Q110 22 102 26 Q94 30 90 22 Q86 14 95 10'/%3E%3Cpath d='M135 8 A10 10 0 1 1 135 28 A7 7 0 1 0 135 8'/%3E%3Ccircle cx='168' cy='15' r='3'/%3E%3Cpath d='M165 18 L155 28 M166 20 L158 26'/%3E%3Ccircle cx='25' cy='50' r='5'/%3E%3Cpath d='M22 54 L10 66 M24 56 L14 64'/%3E%3Cpath d='M60 45 L60 35 M60 55 L60 65 M50 50 L40 50 M70 50 L80 50 M54 44 L50 40 M66 44 L70 40'/%3E%3Ccircle cx='105' cy='48' r='8'/%3E%3Cellipse cx='105' cy='48' rx='16' ry='5'/%3E%3Ccircle cx='145' cy='42' r='1.5'/%3E%3Ccircle cx='152' cy='50' r='2'/%3E%3Ccircle cx='148' cy='58' r='1.5'/%3E%3Ccircle cx='158' cy='45' r='1'/%3E%3Ccircle cx='162' cy='55' r='1.5'/%3E%3Cpath d='M20 95 L28 80 L36 95 M23 95 L23 108 L33 108 L33 95 M21 108 L18 118 M35 108 L38 118'/%3E%3Ccircle cx='65' cy='90' r='6'/%3E%3Ccircle cx='65' cy='90' r='12' stroke-dasharray='2 3'/%3E%3Ccircle cx='77' cy='90' r='2'/%3E%3Cpath d='M110 82 Q120 75 125 85 Q130 95 120 100 Q110 105 105 95 Q100 85 110 80 Q125 72 135 88'/%3E%3Cpath d='M155 80 L170 95 M152 83 L167 98'/%3E%3Crect x='170' y='95' width='8' height='12' rx='1'/%3E%3Ccircle cx='25' cy='135' r='2'/%3E%3Ccircle cx='38' cy='128' r='1.5'/%3E%3Ccircle cx='42' cy='140' r='2'/%3E%3Ccircle cx='30' cy='145' r='1.5'/%3E%3Cpath d='M27 135 L36 129 M40 130 L41 138 M40 142 L32 144' stroke-dasharray='2 2'/%3E%3Cpath d='M70 125 L70 115 M70 135 L70 145 M60 130 L50 130 M80 130 L90 130 M63 123 L58 118 M77 123 L82 118 M63 137 L58 142 M77 137 L82 142'/%3E%3Ccircle cx='70' cy='130' r='3'/%3E%3Ccircle cx='115' cy='130' r='4'/%3E%3Cpath d='M111 134 L100 145 M113 136 L104 143'/%3E%3Ccircle cx='155' cy='125' r='7'/%3E%3Cellipse cx='155' cy='125' rx='14' ry='4' transform='rotate(20 155 125)'/%3E%3Cpath d='M18 168 L18 160 M18 176 L18 184 M10 172 L2 172 M26 172 L34 172'/%3E%3Ccircle cx='55' cy='170' r='5'/%3E%3Ccircle cx='55' cy='170' r='10' stroke-dasharray='2 3'/%3E%3Ccircle cx='65' cy='170' r='2'/%3E%3Cpath d='M100 165 A8 8 0 1 1 100 181 A5 5 0 1 0 100 165'/%3E%3Ccircle cx='140' cy='168' r='2'/%3E%3Ccircle cx='150' cy='162' r='1.5'/%3E%3Ccircle cx='155' cy='172' r='2'/%3E%3Ccircle cx='145' cy='178' r='1.5'/%3E%3Cpath d='M142 168 L148 163 M152 164 L154 170 M153 174 L147 177' stroke-dasharray='2 2'/%3E%3C/g%3E%3C/svg%3E");
}

/* =============================================================================
   BASE
   ============================================================================= */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg-dark);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.5;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1rem;
}

.hidden {
    display: none !important;
}

/* =============================================================================
   HEADER
   ============================================================================= */

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    background: var(--bg-card);
    background-image: var(--astro-pattern);
    background-size: 180px 180px;
    border-radius: 8px;
    margin-bottom: 1rem;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.header-left {
    display: flex;
    align-items: baseline;
    gap: 1rem;
}

.header-left h1 {
    font-size: 1.5rem;
    background: var(--gradient-fire);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.subtitle {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.nav-tabs {
    display: flex;
    gap: 0.5rem;
}

.nav-tab {
    padding: 0.5rem 1rem;
    text-decoration: none;
    color: var(--text-secondary);
    border-radius: 4px;
    transition: all 0.2s;
}

.nav-tab:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
}

.nav-tab.active {
    background: var(--accent-amber);
    color: #1a1612;
    font-weight: 600;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.75rem;
    background: var(--bg-input);
    border-radius: 20px;
    font-size: 0.85rem;
}

.status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--text-muted);
}

.status-dot.active {
    background: var(--accent-green);
    animation: pulse 2s infinite;
}

.status-dot.inactive {
    background: var(--text-muted);
}

.status-dot.history {
    background: var(--accent-blue);
}

.status-dot.error {
    background: var(--accent-red);
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* =============================================================================
   SECTIONS
   ============================================================================= */

.main-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.section {
    background: var(--bg-card);
    background-image: var(--astro-pattern);
    background-size: 180px 180px;
    border-radius: 8px;
    padding: 1rem;
}

.section h2 {
    font-size: 1.1rem;
    background: var(--gradient-fire);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

.section h3 {
    font-size: 0.95rem;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}

/* =============================================================================
   SESSION SELECTOR
   ============================================================================= */

.session-selector {
    padding: 0.75rem 1rem;
}

.selector-tabs {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.selector-tab {
    padding: 0.5rem 1rem;
    background: var(--bg-input);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
}

.selector-tab:hover {
    border-color: var(--accent-blue);
    color: var(--text-primary);
}

.selector-tab.active {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
    color: white;
}

.session-info {
    background: var(--bg-input);
    border-radius: 6px;
    padding: 0.75rem 1rem;
}

.session-header-info {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
}

.session-header-info .label {
    color: var(--text-secondary);
    margin-right: 0.5rem;
}

.session-header-info .value {
    color: var(--text-primary);
    font-weight: 500;
}

.session-header-info .object-name .value {
    color: var(--accent-blue);
    font-size: 1.1rem;
}

/* History Panel */
.history-panel {
    max-height: 300px;
    overflow-y: auto;
}

.history-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.history-item {
    background: var(--bg-input);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 0.75rem 1rem;
    cursor: pointer;
    transition: all 0.2s;
}

.history-item:hover {
    border-color: var(--accent-blue);
}

.history-item.selected {
    border-color: var(--accent-blue);
    background: rgba(52, 152, 219, 0.1);
}

.history-item-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.25rem;
}

.history-object {
    color: var(--accent-blue);
    font-weight: 500;
}

.history-date {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.history-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-delete {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    opacity: 0.5;
    transition: all 0.2s;
}

.btn-delete:hover {
    background: rgba(231, 76, 60, 0.2);
    opacity: 1;
}

.history-item-stats {
    display: flex;
    gap: 1.5rem;
    font-size: 0.85rem;
    color: var(--text-muted);
}

/* =============================================================================
   CHARTS SECTION
   ============================================================================= */

.charts-section h2 {
    margin-bottom: 0.5rem;
}

.charts-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1rem;
}

.chart-wrapper {
    background: var(--bg-input);
    border-radius: 6px;
    padding: 0.75rem;
    height: 250px;
}

.chart-legend {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-top: 0.75rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--border-color);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.legend-color {
    width: 24px;
    height: 3px;
    border-radius: 2px;
}

.legend-color.normal {
    background: var(--mode-normal);
}

.legend-color.critical {
    background: var(--mode-critical);
}

.legend-color.continuous {
    background: var(--mode-continuous);
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.legend-dot.correction {
    background: var(--accent-red);
    border: 2px solid white;
}

/* =============================================================================
   STATS SECTION
   ============================================================================= */

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.stat-card {
    background: var(--bg-input);
    border-radius: 6px;
    padding: 1rem;
    text-align: center;
    border-left: 3px solid var(--accent-blue);
}

.stat-card.clockwise {
    border-left-color: var(--accent-green);
}

.stat-card.counterclockwise {
    border-left-color: var(--accent-orange);
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    font-family: 'Monaco', 'Menlo', monospace;
}

.stat-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-top: 0.25rem;
}

/* Mode Distribution */
.mode-distribution {
    background: var(--bg-input);
    border-radius: 6px;
    padding: 0.75rem 1rem;
}

.mode-distribution h3 {
    margin-bottom: 0.75rem;
}

.mode-bars {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.mode-bar-container {
    display: grid;
    grid-template-columns: 100px 1fr 80px;
    align-items: center;
    gap: 0.75rem;
}

.mode-bar-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
    text-transform: uppercase;
}

.mode-bar {
    height: 8px;
    border-radius: 4px;
    transition: width 0.3s ease;
}

.mode-bar.normal {
    background: var(--mode-normal);
}

.mode-bar.critical {
    background: var(--mode-critical);
}

.mode-bar.continuous {
    background: var(--mode-continuous);
}

.mode-bar-value {
    font-size: 0.85rem;
    color: var(--text-muted);
    font-family: monospace;
    text-align: right;
}

/* =============================================================================
   TABLES
   ============================================================================= */

.table-container {
    overflow-x: auto;
    max-height: 300px;
    overflow-y: auto;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
}

.data-table th,
.data-table td {
    padding: 0.5rem 0.75rem;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.data-table th {
    background: var(--bg-input);
    color: var(--text-secondary);
    font-weight: 500;
    text-transform: uppercase;
    font-size: 0.75rem;
    position: sticky;
    top: 0;
    z-index: 1;
}

.data-table td {
    font-family: 'Monaco', 'Menlo', monospace;
    color: var(--text-primary);
}

.data-table td.empty {
    text-align: center;
    color: var(--text-muted);
    font-style: italic;
    font-family: inherit;
}

.correction-value {
    font-weight: 500;
}

.correction-value.positive {
    color: var(--accent-green);
}

.correction-value.negative {
    color: var(--accent-orange);
}

/* Mode badges */
.mode-badge {
    display: inline-block;
    padding: 0.15rem 0.5rem;
    border-radius: 3px;
    font-size: 0.7rem;
    text-transform: uppercase;
    font-weight: 500;
}

.mode-badge.normal {
    background: rgba(0, 210, 106, 0.2);
    color: var(--mode-normal);
}

.mode-badge.critical {
    background: rgba(255, 165, 2, 0.2);
    color: var(--mode-critical);
}

.mode-badge.continuous {
    background: rgba(255, 71, 87, 0.2);
    color: var(--mode-continuous);
}

/* =============================================================================
   FOOTER
   ============================================================================= */

.footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    background: var(--bg-card);
    border-radius: 8px;
    margin-top: 1rem;
    font-size: 0.85rem;
    color: var(--text-secondary);
    flex-wrap: wrap;
    gap: 0.5rem;
}

.auto-refresh {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
}

.auto-refresh input {
    cursor: pointer;
}

/* =============================================================================
   UTILITAIRES
   ============================================================================= */

.loading {
    text-align: center;
    padding: 2rem;
    color: var(--text-muted);
}

.error {
    text-align: center;
    padding: 1rem;
    color: var(--accent-red);
}

/* =============================================================================
   RESPONSIVE
   ============================================================================= */

@media (max-width: 768px) {
    .header {
        flex-direction: column;
        align-items: stretch;
    }

    .header-left {
        justify-content: center;
    }

    .nav-tabs {
        justify-content: center;
    }

    .header-right {
        justify-content: center;
    }

    .charts-container {
        grid-template-columns: 1fr;
    }

    .chart-wrapper {
        height: 200px;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .mode-bar-container {
        grid-template-columns: 80px 1fr 60px;
    }

    .session-header-info {
        flex-direction: column;
        gap: 0.5rem;
    }

    .chart-legend {
        flex-wrap: wrap;
        gap: 0.75rem;
    }

    .footer {
        flex-direction: column;
        text-align: center;
    }
}

@media (max-width: 480px) {
    .container {
        padding: 0.5rem;
    }

    .section {
        padding: 0.75rem;
    }

    .stats-grid {
        grid-template-columns: 1fr;
    }

    .data-table {
        font-size: 0.75rem;
    }

    .data-table th,
    .data-table td {
        padding: 0.4rem 0.5rem;
    }
}
