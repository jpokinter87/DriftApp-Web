---
phase: 02-dashboard-modernization
plan: 02
type: execute
wave: 1
depends_on: ["02-01"]
files_modified:
  - web/templates/dashboard.html
  - web/static/css/dashboard.css
autonomous: false
---

<objective>
## Goal
Restaurer l'atmosphere visuelle observatory sur les panels (motif astronomique SVG, glow effects) et raffiner la hierarchie visuelle des groupes de controle (JOG, Continuous, GOTO) avec des separateurs et micro-interactions ameliorees.

## Purpose
Le Plan 02-01 a migre la structure vers Tailwind, mais les panels ont perdu leur texture de fond astronomique distinctive. Ce plan restaure l'identite visuelle observatory et ameliore l'experience utilisateur des controles.

## Output
- `web/templates/dashboard.html` — panels enrichis avec separateurs et meilleure hierarchie
- `web/static/css/dashboard.css` — ajout motif astronomique, glow effects, separateurs
</objective>

<context>
## Project Context
@.paul/PROJECT.md
@.paul/ROADMAP.md

## Prior Work
@.paul/phases/02-dashboard-modernization/02-01-SUMMARY.md
- Dashboard herite de base.html, layout Tailwind fonctionnel
- Pattern: .section-title-fire pour gradient feu sur les titres

## Source Files
@web/templates/dashboard.html — template actuel post-02-01
@web/static/css/dashboard.css — CSS specifiques post-02-01 (~760 lignes)
</context>

<skills>
## Required Skills (from SPECIAL-FLOWS.md)

| Skill | Priority | When to Invoke | Loaded? |
|-------|----------|----------------|---------|
| /frontend-design | required | Avant modification du template HTML | ○ |

**BLOCKING:** Required skills MUST be loaded before APPLY proceeds.

## Skill Invocation Checklist
- [ ] /frontend-design loaded
</skills>

<acceptance_criteria>

## AC-1: Motif astronomique SVG restaure
```gherkin
Given les panels du dashboard
When on affiche la page
Then chaque panel affiche un motif de fond SVG subtil (constellations, etoiles, telescopes)
And le motif est visible mais discret (ne gene pas la lecture)
And la palette marron/ambre du motif est coherente avec le theme
```

## AC-2: Hierarchie visuelle des controles amelioree
```gherkin
Given le panel Controle Manuel
When on regarde la section
Then les groupes JOG, Continuous et GOTO sont visuellement separes par des dividers
And chaque groupe a un label subtil identifiant sa fonction
And le bouton STOP est visuellement dominant (glow rouge)
```

## AC-3: Panel Suivi Actif ameliore
```gherkin
Given un suivi en cours (ou le panel visible)
When le panel Suivi Actif s'affiche
Then il a une bordure verte avec glow subtil
And les infos sont clairement lisibles sur le fond sombre
```

## AC-4: Zero regression JS
```gherkin
Given les modifications du template
When dashboard.js s'execute
Then tous les getElementById fonctionnent
And le polling, la boussole et les event listeners marchent
```

</acceptance_criteria>

<tasks>

<task type="auto">
  <name>Task 1: Restaurer le motif astronomique et ajouter les glow effects</name>
  <files>web/static/css/dashboard.css</files>
  <action>
    Ajouter dans dashboard.css:

    1. Creer un fichier SVG externe web/static/img/constellations-pattern.svg:
       - Dessiner de VRAIES constellations avec des positions d'etoiles astronomiquement correctes
       - Constellations a inclure: Grande Ourse (7 etoiles), Orion (7 etoiles principales),
         Cassiopee (5 etoiles en W), Cygne/Croix du Nord (5 etoiles)
       - Style: points (cercles r=2-3) + lignes fines (stroke-width=0.8) reliant les etoiles
       - Couleur: stroke et fill en #3a3028 (coherent theme marron observatory)
       - Disposer les 4 constellations dans un carre ~400x400 avec espacement genereux
       - Les constellations doivent etre a des angles et echelles legrement differents pour un rendu naturel

    2. Creer une classe .panel-astro qui applique le motif:
       ```css
       .panel-astro {
           background-image: url('/static/img/constellations-pattern.svg');
           background-size: 400px 400px;
           background-repeat: repeat;
       }
       ```

    3. Ajouter des glow effects subtils:
       - .panel-astro avec un box-shadow discret au hover
       - Le panel Suivi Actif (#tracking-info) avec un glow vert anime quand visible
       - Le bouton STOP avec un glow rouge permanent (shadow-glow-red)

    IMPORTANT: Utiliser les variables Tailwind existantes (--color-*, --shadow-*).
    IMPORTANT: Ne pas modifier tailwind-input.css (hors scope).
  </action>
  <verify>
    python -c "
with open('web/static/css/dashboard.css') as f:
    content = f.read()
assert '--astro-pattern' in content or 'astro-pattern' in content, 'Missing astro pattern'
assert '.panel-astro' in content, 'Missing .panel-astro class'
print('✓ Motif astronomique et classes presentes')
"
  </verify>
  <done>AC-1 satisfait: motif astronomique restaure dans le CSS</done>
</task>

<task type="auto">
  <name>Task 2: Enrichir les panels du template avec separateurs et hierarchie</name>
  <files>web/templates/dashboard.html</files>
  <action>
    Modifier dashboard.html pour:

    1. Ajouter la classe .panel-astro a chaque .panel:
       - Section boussole: class="panel panel-astro"
       - Panel Suivi d'Objet: class="panel panel-astro"
       - Panel Controle Manuel: class="panel panel-astro"
       - Section Journal: class="panel panel-astro"

    2. Dans le panel Controle Manuel, ajouter des separateurs visuels entre les 3 groupes:
       - Apres les boutons JOG: ajouter un &lt;div class="section-divider"&gt;&lt;/div&gt;
       - Apres les boutons Continuous: ajouter un &lt;div class="section-divider"&gt;&lt;/div&gt;
       - Ajouter des labels de groupe subtils:
         - Avant JOG: &lt;span class="text-[0.65rem] text-obs-text-muted uppercase tracking-wider mb-1 block"&gt;Pas a pas&lt;/span&gt;
         - Avant Continuous: &lt;span class="text-[0.65rem] text-obs-text-muted uppercase tracking-wider mb-1 block"&gt;Continu&lt;/span&gt;
         - Avant GOTO: &lt;span class="text-[0.65rem] text-obs-text-muted uppercase tracking-wider mb-1 block"&gt;Position&lt;/span&gt;

    3. Suivi Actif panel: remplacer border-2 par une classe CSS plus riche (glow animate)

    IMPORTANT: Conserver TOUS les IDs existants.
    IMPORTANT: Ne pas modifier la structure des boutons ni les data-attributes.
  </action>
  <verify>
    python -c "
with open('web/templates/dashboard.html') as f:
    content = f.read()
assert 'panel-astro' in content, 'Missing panel-astro class'
assert 'section-divider' in content, 'Missing section dividers'
ids = ['compass', 'dome-position', 'btn-stop', 'btn-goto',
       'btn-jog-ccw-10', 'btn-cont-ccw', 'goto-angle', 'logs',
       'tracking-info', 'goto-modal', 'update-modal']
missing = [id for id in ids if f'id=\"{id}\"' not in content]
assert not missing, f'Missing IDs: {missing}'
print('✓ Template enrichi, IDs preserves')
"
  </verify>
  <done>AC-2, AC-3, AC-4 satisfaits: panels enrichis, separateurs, zero regression</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Panels enrichis avec atmosphere observatory:
    - Motif astronomique SVG restaure sur tous les panels
    - Separateurs et labels de groupe dans Controle Manuel
    - Glow effects subtils (hover panels, STOP rouge, tracking vert)
  </what-built>
  <how-to-verify>
    1. Lancer: cd web && python manage.py runserver 0.0.0.0:8000
    2. Visiter http://localhost:8000/
    3. Verifier: motif astronomique subtil visible sur les panels (constellations/etoiles en fond)
    4. Verifier: Panel Controle Manuel a 3 groupes separes (Pas a pas / Continu / Position)
    5. Verifier: Le bouton STOP a un glow rouge
    6. Verifier: Tous les boutons restent cliquables et fonctionnels
    7. Verifier: La boussole canvas se dessine correctement
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<boundaries>

## DO NOT CHANGE
- web/static/js/dashboard.js (migration JS = Plan 02-03)
- web/templates/base.html (Phase 1)
- web/static/css/tailwind-input.css (Phase 1)
- web/templates/system.html, web/templates/session.html (Phase 3-4)
- core/, services/ (backend)

## SCOPE LIMITS
- Ce plan ajoute du polish visuel — pas de nouveaux composants fonctionnels
- Pas de migration Alpine.js (Plan 02-03)
- Pas de modification des modals (Plan 02-03)
- Pas de nouveaux IDs ou event listeners JS

</boundaries>

<verification>
Before declaring plan complete:
- [ ] Motif astronomique visible sur tous les panels
- [ ] Separateurs entre groupes de controle
- [ ] Glow effects fonctionnels (hover, STOP, tracking)
- [ ] Tous IDs DOM preserves
- [ ] Verification visuelle approuvee
</verification>

<success_criteria>
- Panels avec atmosphere observatory (motif + glow)
- Hierarchie visuelle claire dans Controle Manuel
- Zero regression fonctionnelle
- Verification humaine approuvee
</success_criteria>

<output>
After completion, create `.paul/phases/02-dashboard-modernization/02-02-SUMMARY.md`
</output>
